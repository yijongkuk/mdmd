generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
}

// ── MVP에서 사용하지 않는 enum/모델은 주석 처리 ──────────────────
// enum ZoneType { ... }
// enum ModuleCategory { ... }
// model LandParcel { ... }
// model BuildingRegulation { ... }
// model ModuleDefinition { ... }
// model Material { ... }
// model MaterialConfig { ... }
// model ClosedSchool { ... }

model Project {
  id          String  @id @default(cuid())
  name        String
  description String?

  parcelPnu String? // 필지 고유번호 (FK 없이 직접 저장)

  appraisalValue Float @default(0) // 감정가 (원)
  minBidPrice    Float @default(0) // 최저입찰가 (원)

  gridSizeM Float @default(0.6) // 그리드 크기 (m)

  totalModules Int   @default(0)
  totalArea    Float @default(0) // 총 면적 (m²)
  totalCost    Float @default(0) // 총 비용 (원)

  placements ModulePlacement[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ModulePlacement {
  id String @id @default(cuid())

  projectId String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)

  moduleId String // 모듈 정의 ID (클라이언트 상수 참조, FK 없음)

  gridX Int // 그리드 X 위치
  gridY Int // 그리드 Y 위치 (층 높이)
  gridZ Int // 그리드 Z 위치

  rotation Int @default(0) // 0, 90, 180, 270
  floor    Int @default(1) // 층

  materialId  String? // 재질 ID (클라이언트 상수 참조)
  customColor String? // 커스텀 색상 (hex)

  createdAt DateTime @default(now())
}
